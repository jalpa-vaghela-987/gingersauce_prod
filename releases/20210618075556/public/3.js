(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{59:function(t,e,n){"use strict";var i=function(t,e){e=e||4;var n,i,r,o=function o(){r?(t.apply({},i),r=0,n=setTimeout(o,e)):n=0};return function(){i=arguments,r=1,n||o()}};t.exports=i},60:function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=function(t){var e=t.round;function n(t,e){var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=e?e(t[n]):t[n]);return i}function r(t){return t+t}function o(t,e){var n,i,r=e.split("");for(n in r)if(r.hasOwnProperty(n)&&(i=parseFloat(t[e[n]]),isNaN(i)||i<0||i>1))return 0;return 1}function a(t){for(var n,i,r="",o=0;o<4;o++)n=(i=e(255*t[["r","g","b","a"][o]])).toString(16),i<16&&(n="0"+n),r+=n;return"#"+r}function s(t){for(var e=0,n={};e<4;e++)n[e]=parseInt("0x"+t.substring(2*e+1,2*e+3),16)/255;return{r:n[0],g:n[1],b:n[2],a:n[3]}}function l(e){if(e.r===e.g&&e.g===e.b)return{c:0,m:0,y:0,k:1-e.r};var n=t.min(1-e.r,1-e.g,1-e.b);return{c:(1-e.r-n)/(1-n),m:(1-e.g-n)/(1-n),y:(1-e.b-n)/(1-n),k:n}}function c(e){return{r:1-t.min(1,e.c*(1-e.k)+e.k),g:1-t.min(1,e.m*(1-e.k)+e.k),b:1-t.min(1,e.y*(1-e.k)+e.k),a:1}}function d(t){for(var e=0;e<t.length;e++)-1!==t[e].indexOf("%")?t[e]=t[e].substr(0,t[e].length-1)/100:t[e]=t[e]/255,t[e]>1&&(t[e]=1);return t}function u(e){var n;return e=e.replace(/\s+/g,""),/^#/.test(e)?n=function(t){var e;return/^#([0-9a-f]{3}){1,2}$/i.test(t)?(4===t.length&&(t=t.replace(/[0-9a-f]/gi,r)),(e={r:s(t)}).r.a=1):/^#([0-9a-f]{4}){1,2}$/i.test(t)&&(5===t.length&&(t=t.replace(/[0-9a-f]/gi,r)),e={r:s(t)}),e}(e):/^rgba/.test(e)?n=function(t){var e,n;if((e=t.match(/^rgba\((\d+%?),(\d+%?),(\d+%?),(\.\d+|\d+\.?\d*)\)$/))&&5===e.length)return e.shift(),(n=e.pop()/1)>1&&(n=1),{r:{r:(e=d(e))[0],g:e[1],b:e[2],a:n}}}(e):/^rgb/.test(e)?n=function(t){var e;if((e=t.match(/^rgb\((\d+%?),(\d+%?),(\d+%?)\)$/))&&4===e.length)return e.shift(),{r:{r:(e=d(e))[0],g:e[1],b:e[2],a:1}}}(e):/^hsla/.test(e)?n=function(e){var n,i,r;if((n=e.match(/^hsla\((-?\d+),(\d+%),(\d+%),(\.\d+|\d+\.?\d*)\)$/))&&5===n.length)return n.shift(),r=n.shift()/360,r-=t.floor(r),(i=n.pop()/1)>1&&(i=1),{h:{h:r,s:(n=d(n))[0],l:n[1],a:i}}}(e):/^hsl/.test(e)?n=function(e){var n,i;if((n=e.match(/^hsl\((-?\d+),(\d+%),(\d+%)\)$/))&&4===n.length)return n.shift(),i=n.shift()/360,{h:{h:i-=t.floor(i),s:(n=d(n))[0],l:n[1],a:1}}}(e):/^device-cmyk/.test(e)&&(n=function(t){var e,n;if((e=t.match(/^device-cmyk\((\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*)\)$/))&&5===e.length){for(e.shift(),n=0;n<e.length;n++)e[n]=e[n]/1,e[n]>1&&(e[n]=1);return{r:c({c:e[0],m:e[1],y:e[2],k:e[3]})}}}(e)),n}function h(e){var r;return"string"==typeof e?r=u(e):e instanceof v?r={r:e.getRgba(),h:e.getHsla()}:"object"===i(e)&&(r=function(e){var i,r;return o(e=n(e,parseFloat),"sl")&&!isNaN(e.h)?(e.h=e.h-t.floor(e.h),r={h:e},i=1,o(e,"a")&&(i=e.a),r.h.a=i):o(e,"rgb")?(r={r:e},i=1,o(e,"a")&&(i=e.a),r.r.a=i):o(e,"cmyk")&&(r={r:c(e)}),r}(e)),r}function g(t){return e(100*t)/100}function f(t){return[e(255*t.r),e(255*t.g),e(255*t.b),g(t.a)]}function p(t){return[e(360*t.h),e(100*t.s)+"%",e(100*t.l)+"%",g(t.a)]}function v(e){var i=this,r={r:0,g:0,b:0,a:1},o={h:0,s:0,l:0,a:1};i.getRgba=function(){return n(r)},i.getRgb=function(){var t=n(r);return delete t.a,t},i.getHsla=function(){return n(o)},i.getHsl=function(){var t=n(o);return delete t.a,t},i.getCmyk=function(){return l(r)},i.getRgbaString=function(){return"rgba("+f(r).join()+")"},i.getRgbString=function(){var t=f(r);return t.pop(),"rgb("+t.join()+")"},i.getHexaString=function(){return a(r)},i.getHexString=function(){return a(r).substring(0,7)},i.getHslaString=function(){return"hsla("+p(o).join()+")"},i.getHslString=function(){var t=p(o);return t.pop(),"hsl("+t.join()+")"},i.getCmykString=function(){var t;return"device-cmyk("+[g((t=l(r)).c),g(t.m),g(t.y),g(t.k)].join()+")"},i.getTextColor=function(){return new v(.2126*r.r+.7152*r.g+.0722*r.b<.35?"#fff":"#000")},i.setColor=function(e){var n=h(e);return n&&(n.r&&n.h?(r=n.r,o=n.h):n.r?(r=n.r,o=function(e){var n,i,r=e.r,o=e.g,a=e.b,s=t.max(r,o,a),l=t.min(r,o,a),c=(s+l)/2;if(s===l)n=i=0;else{var d=s-l;switch(i=c>.5?d/(2-s-l):d/(s+l),s){case r:n=(o-a)/d+(o<a?6:0);break;case o:n=(a-r)/d+2;break;case a:n=(r-o)/d+4}n/=6}return{h:n,s:i,l:c,a:e.a}}(n.r)):(r=function(t){var e,n,i;if(0===t.s)e=n=i=t.l;else{var r,o=function(t,e,n){return n<0?n+=1:n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t};r=t.l<.5?t.l*(1+t.s):t.l+t.s-t.l*t.s;var a=2*t.l-r;e=o(a,r,t.h+1/3),n=o(a,r,t.h),i=o(a,r,t.h-1/3)}return{r:e,g:n,b:i,a:t.a}}(n.h),o=n.h)),i},i.setAlpha=function(t){return t=parseFloat(t),!isNaN(t)&&t>=0&&t<=1&&(r.a=t,o.a=t),i},i.getAlpha=function(){return r.a},i.setColor(e)}return v}(Math);t.exports=r},61:function(t,e,n){"use strict";t.exports={getEventPosition:function(t,e,n){var i,r,o=0,a=0,s=e.originalEvent,l=s.touches||s.changedTouches;return t?(i=n.parent().offset(),r=t._preview.outerHeight()):(i=n.offset(),r=0),l?(o=l[0].pageX-i.left,a=l[0].pageY-i.top-r):s.clientX&&(o=s.clientX+window.pageXOffset-i.left,a=s.clientY+window.pageYOffset-i.top-r),[o,a]}}},89:function(t,e,n){"use strict";var i,r,o,a=(i=n(60),r=n(59),o=n(61),function(t,e,n,a,s,l,c,d,u,h,g){var f=this,p=function(){var t=k;return a&&(t+=c+d),s?k+c:"cmyk"===H?t+4*c+3*d:t+3*c+2*d},v=function(t,e,n){var r=$.extend({},t);return r[e]=n,new i(r)},w=function(){return N.createLinearGradient(0,D-c/2-10,0,c/2+10)},C=function(t,e){(x=w()).addColorStop(0,t.getHexString()),x.addColorStop(1,e.getHexString()),N.strokeStyle=x},b=function(){var t,e,n,r;N.clearRect(0,0,p(),D),y();var o,l=10,u=function(){N.beginPath(),N.moveTo(l+c/2,c/2+10),N.lineTo(l+c/2,D-c/2-10),N.lineWidth=c,N.lineCap="round",N.stroke()};if(a){var h=document.createElement("canvas");h.height=10,h.width=10;var g=h.getContext("2d");g.fillStyle="#ccc",g.fillRect(0,0,10,10),g.fillStyle="#888",g.fillRect(0,0,5,5),g.fillRect(5,5,5,5);var f=N.createPattern(h,"repeat");N.strokeStyle=f,u(),(x=w()).addColorStop(0,new i(P).setAlpha(0).getRgbaString()),x.addColorStop(1,P.getHexString()),N.strokeStyle=x,u(),l+=c+d}s?m():"rgb"===H?($.each(R,(function(n,i){t=v(P.getRgb(),i,0),e=v(P.getRgb(),i,1),C(t,e),u(),l+=c+d})),m(P.getRgb())):"hsl"===H?((x=w()).addColorStop(0,"#f00"),x.addColorStop(1/6,"#ff0"),x.addColorStop(2/6,"#0f0"),x.addColorStop(.5,"#0ff"),x.addColorStop(4/6,"#00f"),x.addColorStop(5/6,"#f0f"),x.addColorStop(1,"#f00"),N.strokeStyle=x,u(),l+=c+d,t=v(P.getHsl(),"s",0),e=v(P.getHsl(),"s",1),C(t,e),u(),l+=c+d,(n=$.extend({},P.getHsl())).l=.5,o=new i(n),(x=w()).addColorStop(0,"#000"),x.addColorStop(.5,o.getHexString()),x.addColorStop(1,"#fff"),N.strokeStyle=x,u(),m(P.getHsl())):"cmyk"===H&&($.each("cmy".split(""),(function(n,i){t=v(P.getCmyk(),i,0),e=v(P.getCmyk(),i,1),C(t,e),u(),l+=c+d})),(r=$.extend({},P.getCmyk())).k=0,function(t){(x=w()).addColorStop(0,t.getHexString()),x.addColorStop(1,"#000"),N.strokeStyle=x}(r=new i(r)),u(),m(P.getCmyk()))},m=function(t){var e,n,i,r=10,o=function(t,i,r){N.strokeStyle=t,N.lineWidth=i,N.beginPath(),N.arc(e,n,r,0,2*Math.PI,!0),N.closePath(),N.stroke()};a&&(e=r+c/2,n=(i=D-c-20)-i*P.getAlpha()+c/2+10,r+=c+d,o("#fff",1.5,6),o("#000",2,4.5)),s||$.each(t,(function(t,a){e=r+c/2,n=(i=D-c-20)-i*a+c/2+10,o("#fff",1.5,6),o("#000",2,4.5),r+=c+d}))},_=function(t){N.shadowColor=g,N.shadowBlur=h,N.beginPath(),N.moveTo(t,c/2+10),N.lineTo(t,D-c/2-10),N.lineWidth=c-2,N.strokeStyle="rgba(0,0,0,1)",N.lineCap="round",N.stroke(),N.shadowBlur=0},y=function(){if(h>0){var t=10;a&&(_(t+c/2),t+=c+d),s||$.each(R,(function(){_(t+c/2),t+=c+d}))}},S=function(){var t=0;if(a||s?M.append($("<div />").text("A").width(c).css({"padding-left":10})):s||(M.append($("<div />").text(R[0].toUpperCase()).width(c).css({"padding-left":10})),t++),!s)for(;t<R.length;t++)M.append($("<div />").text(R[t].toUpperCase()).width(c).css({"padding-left":d}))},W=r((function(e){var n=o.getEventPosition(!1,e,E),r=D-c-k,l=r-Math.round(n[1]-c/2-k/2);l<0?l=0:l>r&&(l=r);var d=l/r;if(a&&0===A)P.setAlpha(d);else if(!s){var u=A;a&&u--;var h="get"+H.charAt(0).toUpperCase()+H.slice(1),g=P[h]();g[R[u]]=d,g.a=P.getAlpha(),P=new i(g)}b(),t.trigger("chromoselector.chromoselector")}));f.getColor=function(){return P},f.getWidth=function(){return p()},f.setAlpha=function(t){return P.setAlpha(t),f},f.setColor=function(t){return P=new i(t),b(),f},f.setHeight=function(t){return N.clearRect(0,0,p(),D),O=M.outerHeight(!0),L.width(p()-20),D=t-L.outerHeight(!0)-O,E.attr("height",D),b(),f},f.setMode=function(t){return $.inArray(t,I)>=0&&(L.val(t),H=t,R=t.split(""),E.attr("width",p()),b(),u&&(M.width(p()).children().remove(),S()),L.width(p()-20)),f};var x,k=20,P=new i,H="rgb",R=H.split(""),z=0,A=0,T=0,I=["rgb","hsl","cmyk"],L=$("<select/>");!s&&n.length&&($.each(n,(function(t,e){L.append($("<option/>").html(e))})),t.append(L),T=L.outerHeight(!0));var D=l-T,E=$("<canvas/>").attr("width",p()).attr("height",D).css("display","block");t.append(E);var M=$(),O=0;u&&(M=$("<div />").addClass("ui-panel-labels").width(p()),S(),t.append(M));var N=E[0].getContext("2d");f.setMode(e),s||L.change((function(){f.setMode($(":selected",this).val())})),t.add(M.find("div")).bind("mousedown touchstart",(function(t){$(this).is(t.target)&&t.preventDefault()})),E.bind("mousedown touchstart",(function(t){t.preventDefault(),A=0;for(var e=10,n=o.getEventPosition(!1,t,$(this));A<5&&!z;)n[0]>e&&n[0]<e+c?(z=1,W(t)):(A++,e+=c+d)})).bind("mousemove touchmove",(function(t){var e=o.getEventPosition(!1,t,E),n=E.width(),i=k/2;if(e[0]>i&&e[1]>i&&e[0]<n-i&&e[1]<E.height()-i)for(var r=i;r<n;){if(e[0]>r&&e[0]<c+r){E.css("cursor","crosshair");break}E.css("cursor",""),r+=c+d}else E.css("cursor","")})),$([window,document]).bind("mousemove touchmove",(function(t){z&&(t.preventDefault(),W(t))})).bind("mouseup touchend",(function(t){z&&(t.preventDefault(),z=0,W(t))}))});t.exports=a},94:function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t,e,r,o){var a=e.document,s="chromoselector",l="create|ready|update|destroy|show|beforeShow|hide|beforeHide|resize|resizeStart|resizeStop",c=n(59),d=n(60),u=n(89),h=n(61);function g(t,e,n){return[n+t*r.cos(e),n+t*r.sin(e)]}function f(t,e,n){return w(t,[e,e])<=n}function p(t,e,n,i){var r=function(t,e,n){return(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1])},o=r(t,e,n)<0,a=r(t,n,i)<0,s=r(t,i,e)<0;return o===a&&a===s}function v(t,e){return-1/((e[1]-t[1])/(e[0]-t[0]))}function w(t,e){var n=t[0]-e[0],i=t[1]-e[1];return r.sqrt(n*n+i*i)}function C(t,e){return e*e==1/0?[t[0],t[1]+1]:[t[0]+1,e+t[1]]}function b(t,e,n,i){var r=(i[1]-n[1])*(e[0]-t[0])-(i[0]-n[0])*(e[1]-t[1]),o=((i[0]-n[0])*(t[1]-n[1])-(i[1]-n[1])*(t[0]-n[0]))/r;return[t[0]+o*(e[0]-t[0]),t[1]+o*(e[1]-t[1])]}function m(t,e,n,i){var r,o=4*(e+n*t.width);for(r=0;r<4;r++)t.data[o+r]=i[r]}function _(t,e,n,i){var r,o=b(i,[i[0]+20,i[1]],t,e),a=b(i,[i[0]+20,i[1]],t,n);return[r=i[0]<o[0]?255:i[0]>a[0]?0:(a[0]-i[0])/(a[0]-o[0])*255,r,r,255]}var y={};function S(e){var n=e.Width,i=e.canvases[1].getContext("2d");!function(e,n){var i=e.getContext("2d"),o=t("<canvas>").attr("width",n).attr("height",n)[0],a=o.getContext("2d");if(!y.ColorWheelBg){y.ColorWheelBg=i.createImageData(80,80);var s,l,c,d,u,h,g,f,p=180/r.PI,v=function(t){return(t%=360)>=240?0:t>=180?(240-t)/60*255:t>=60?255:t/60*255};for(l=0;l<80;l++)for(d=l-40,c=0;c<80;c++)u=c-40,h=v((s=r.atan2(d,u)*p+270)+120),g=v(s),f=v(s+240),m(y.ColorWheelBg,l,c,[h,g,f,255])}i.putImageData(y.ColorWheelBg,0,0),a.scale(n/80,n/80),a.drawImage(e,0,0),i.drawImage(o,0,0)}(e.canvases[1],n);var o=[n/2,n/2];i.globalCompositeOperation="destination-out",i.strokeStyle="rgba(0,0,0,1)",i.lineWidth=e.hueSelectorLineWidth,i.beginPath(),i.arc(o[0],o[1],e.hueSelectorCircleRadius-e.hueSelectorLineWidth/2,0,2*r.PI,!0),i.closePath(),i.fill();var a=t("<canvas/>").attr("width",n).attr("height",n)[0],s=a.getContext("2d");s.fillRect(0,0,n,n),s.globalCompositeOperation="destination-out",s.beginPath(),s.arc(o[0],o[1],e.hueSelectorCircleRadius+e.hueSelectorLineWidth/2,0,2*r.PI,!0),s.closePath(),s.fill(),i.drawImage(a,0,0),(i=e.canvases[0].getContext("2d")).lineWidth=e.hueSelectorLineWidth-2,i.shadowColor=e.settings.shadowColor,i.shadowBlur=e.settings.shadow,i.beginPath(),i.arc(o[0],o[1],e.hueSelectorCircleRadius,0,2*r.PI,!0),i.closePath(),i.stroke()}function W(t){var e=t.Color.getHsl().h,n=t.canvases[2].getContext("2d");n.clearRect(0,0,t.Width,t.Width);var i,o=-r.PI/2,a=P(t,o);if(!t.ready){var s,l,c=n.createImageData(t.Width,t.Width),u=function(t,e){return{start:r.round(r.min(t[0][e]-3,t[1][e]-3,t[2][e]-3)),end:r.round(r.max(t[0][e]+3,t[1][e]+3,t[2][e]+3))}},h=u(a,0),g=u(a,1);for(s=a[0][0]-3;s<=h.end;s++)for(l=g.start+(1.7*(s-a[0][0])|0)-3;l<=g.end;l++)m(c,s,l,_(a[0],a[1],a[2],[s,l]));for(s=h.start;s<=a[0][0]-3;s++)for(l=g.start-(1.7*(s-a[0][0])|0)-3;l<=g.end;l++)m(c,s,l,_(a[0],a[1],a[2],[s,l]));(i=t.tempCanvas.getContext("2d")).putImageData(c,0,0);var f=i.createLinearGradient(0,g.start,0,g.end);f.addColorStop(1,"rgba(0,0,0,0)"),f.addColorStop(0,"rgba(0,0,0,1)"),i.fillStyle=f,i.globalCompositeOperation="destination-out",i.fillRect(h.start,g.start,h.end,g.end),i.globalCompositeOperation="source-over"}o=(1-e)*r.PI*2,a=P(t,o),n.fillStyle=new d({h:e,s:1,l:.5}).getHexString(),n.fillRect(0,0,t.Width,t.Width),n.save(),n.translate(t.Width/2,t.Width/2),n.rotate(o+r.PI/2),n.translate(-t.Width/2,-t.Width/2),n.drawImage(t.tempCanvas,0,0),n.restore(),n.beginPath(),n.moveTo(0,0),n.lineTo(a[1][0],a[1][1]),n.lineTo(a[0][0],a[0][1]),n.lineTo(a[2][0],a[2][1]),n.lineTo(a[1][0],a[1][1]),n.lineTo(0,0),n.lineTo(0,t.Width),n.lineTo(t.Width,t.Width),n.lineTo(t.Width,0),n.lineTo(0,0),n.closePath(),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0,0,0,1)",n.fill();var p=function(e,n){var i=1/(t.Width/2)*2;return t.Width/2*i+a[e][n]*(1-i)};n.globalCompositeOperation="destination-over",n.beginPath(),n.moveTo(p(0,0),p(0,1)),n.lineTo(p(1,0),p(1,1)),n.lineTo(p(2,0),p(2,1)),n.closePath(),n.fillStyle="rgba(0,0,0,1)",n.shadowColor=t.settings.shadowColor,n.shadowBlur=t.settings.shadow,n.fill(),n.shadowColor="rgba(0,0,0,0)",n.shadowBlur=0,n.globalCompositeOperation="source-over"}function x(e){var n=e.canvases[3].getContext("2d");n.clearRect(0,0,e.Width,e.Width);var i=(1-e.Color.getHsl().h)*r.PI*2,o=P(e,i),a=g(e.hueSelectorCircleRadius,i,e.Width/2),s=[o[1][0]*e.Color.getHsl().l+(1-e.Color.getHsl().l)*o[2][0],o[1][1]*e.Color.getHsl().l+(1-e.Color.getHsl().l)*o[2][1]],l=C(s,v(o[1],o[2])),c=b(s,l,o[1],o[2]),d=w(o[1],o[2]),u=w(o[2],c),h=o[2];u>=d/2&&(h=o[1]);var f=b(s,l,o[0],h);s=[f[0]*e.Color.getHsl().s+(1-e.Color.getHsl().s)*c[0],f[1]*e.Color.getHsl().s+(1-e.Color.getHsl().s)*c[1]],t.each([a,s],(function(t,e){n.strokeStyle="#fff",n.lineWidth=1.5,n.beginPath(),n.arc(e[0],e[1],6,0,2*r.PI,!0),n.closePath(),n.stroke(),n.lineWidth=2,n.strokeStyle="rgba(0,0,0,1)",n.beginPath(),n.arc(e[0],e[1],4.5,0,2*r.PI,!0),n.closePath(),n.stroke()}))}function k(t,e){var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),t._root.css("border-bottom-color")?n.strokeStyle=t._root.css("border-bottom-color"):n.strokeStyle="#444",n.lineWidth=1,n.lineCap="round",n.beginPath(),n.moveTo(0,18),n.lineTo(18,0),n.moveTo(7,18),n.lineTo(18,7),n.moveTo(13,18),n.lineTo(18,13),n.closePath(),n.stroke()}function P(t,e){var n,i=[];for(n=0;n<3;n++)i[n]=g(t.triangleRadius,e,t.Width/2),e-=2*r.PI/3;return i}function H(t,e){var n=h.getEventPosition(t,e,t._picker),i=r.atan2(n[0]-t.Width/2,n[1]-t.Width/2)*(180/r.PI)+270,o=t.Color.getHsla();t.Color.setColor({h:i/360,s:o.s,l:o.l,a:o.a}),W(t),x(t),t.valueRenderer(t)}function R(t){t.settings.autosave&&z(t),t.settings.preview&&t._previewColor.css("background",t.Color.getRgbaString()),t._source.trigger(t.settings.eventPrefix+"update")}function z(t){var e="";e="function"==typeof t.settings.color2str?t.settings.color2str.call(null,t.Color):t.Color.getHexString(),"function"==typeof t.settings.save?t.settings.save.call(t._source[0],e):t._source.val(e).html(e)}function A(t,e){var n;n="function"==typeof t.settings.load?t.settings.load.call(t._source):t._source.val()||t._source.html(),"function"==typeof t.settings.str2color?t.Color=new d(t.settings.str2color.call(null,n)):t.Color=new d(n),t.settings.preview&&t._preview&&t._previewColor.css("background",t.Color.getRgbaString()),t.panelApi&&t.panelApi.setColor(t.Color),e&&(W(t),x(t))}function T(t,e){if(!t.showing&&!t._root.is(":visible")){if(t.showing=1,t.hiding)return clearTimeout(t.hiding),void(t.hiding=0);t.ready?(A(t),W(t),x(t)):D(t),void 0!==e?((e=parseInt(e,10))<0||isNaN(e))&&(e=t.settings.speed):e=t.settings.speed;var n=t._source.triggerHandler(t.settings.eventPrefix+"beforeShow");if(void 0===n||n){B(t),X(t);var i="fade"===t.Effect?"fadeIn":"slideDown";t._root[i].call(t._root,e,(function(){B(t),t.settings.resizable&&k(t,t._resizer[0]),t._source.trigger(t.settings.eventPrefix+"show"),t.showing=0})),t.panelApi&&t.panelApi.setHeight(t._container.height())}}}function $(t,e){t.hiding=setTimeout((function(){if(!t._panel||!t._panel.find("select:focus").length){t.hiding=0,void 0!==e?((e=parseInt(e,10))<0||isNaN(e))&&(e=t.settings.speed):e=t.settings.speed;var n=t._source.triggerHandler(t.settings.eventPrefix+"beforeHide");if(void 0===n||n){var i="fade"===t.Effect?"fadeOut":"slideUp";t._root[i].call(t._root,e,(function(){B(t),t._source.trigger(t.settings.eventPrefix+"hide")}))}}}),100)}function I(t,e){var n=(1-t.Color.getHsl().h)*r.PI*2,i=P(t,n),o=h.getEventPosition(t,e,t._picker),a=o;if(!p(o,i[0],i[1],i[2])){var s,l=[];for(s=0;s<3;s++)l[s]=w(i[s],o);var c=r.max.apply(null,l);for(s=0;s<3;s++)if(l[s]===c){a=L(o,i,l,s);break}}var d=function(t,e,n,i,r){var o=v(e,n),a=C(i,o),s=b(i,a,e,n),l=w(e,n),c=w(n,s),d=n;c>=l/2&&(d=e);o=v(t,d),a=C(i,o);var u=b(i,s,t,d),h=w(s,i),g=w(s,u),f=h/g;isNaN(f)&&(f=0);return{h:r,s:f,l:c/l}}(i[0],i[1],i[2],a,t.Color.getHsl().h);!function(t,e,n){var i=t.Color.getHsla();t.Color.setColor({h:i.h,s:e,l:n,a:i.a}),x(t),t.valueRenderer(t)}(t,d.s,d.l)}function L(t,e,n,i){var o=[0,1,2],a=b(t,e[o[i]],e[[1,0,1][i]],e[[2,2,0][i]]);if(w(a,e[o[i]])>=w(e[0],e[1])){var s,l=r.min.apply(null,n);for(s=0;s<3;s++)if(n[s]===l){a=e[s];break}}return a}function D(t){S(t),W(t),x(t),t.ready=1,t._source.trigger(t.settings.eventPrefix+"ready")}function E(t,e){var n=h.getEventPosition(t,e,t._picker);(t.settings.panel||t.settings.panelAlpha)&&(n[0]-=t.panelApi.getWidth()),M(t,j(t,r.max(n[0],n[1])+r.max(t.resizeOffset[0],t.resizeOffset[1]))),t._source.trigger(t.settings.eventPrefix+"resize")}function M(t,e){t._container.width(e).height(e+t._preview.outerHeight()),t.settings.panel||t.settings.panelAlpha?(t._root.width(t.panelApi.getWidth()+t._container.width()),t.panelApi.setHeight(t._container.height())):t._root.width(t._container.width()),t._picker.width(e).height(e),N(t,e),X(t)}function O(t,e){e!==t.Width&&(t.ready=0,t.Width=e,t.triangleRadius=e/2-15-t.settings.ringwidth,t.hueSelectorLineWidth=t.settings.ringwidth,t.hueSelectorCircleRadius=t.Width/2-t.hueSelectorLineWidth/2-10,t.canvases.each((function(){this.width=e,this.height=e})).add(t._container),t.tempCanvas.width=e,t.tempCanvas.height=e,M(t,e),D(t))}function N(t,e){if(t.settings.roundcorners){var n="0px 0px 0px "+(e=e||t.Width)/2+"px";t.settings.resizable||t.settings.panel||t.settings.panelAlpha||(n="0px 0px "+e/2+"px "+e/2+"px"),t._root.css({"-webkit-border-radius":n,"border-radius":n})}}function j(t,e){return e|=0,t.settings.maxWidth<t.settings.minWidth&&(t.settings.maxWidth=t.settings.minWidth),e>t.settings.maxWidth?e=t.settings.maxWidth:e<t.settings.minWidth&&(e=t.settings.minWidth),e+=e%2}function B(n){var i;try{i=n._source.offset()}catch(t){return}var r=n._target.offset();if(!n.haveTarget){n._target.css({top:0,left:0});var o=t(a).scrollTop(),s=n._root.height(),l=i.top-o,c=o+t(e).height()-i.top-n._source.outerHeight();c<s&&l>c?(n._root.css({top:i.top-s}),n._resizer&&n._resizer.hide(),n._root.css({"-webkit-border-radius":"","border-radius":""})):(n._root.css({top:i.top+n._source.outerHeight()}),n._resizer&&n._resizer.show(),N(n));var d=t(a).scrollLeft(),u=i.left-d-2,h=i.left+n._root.width()-(d+t(e).width());if(h>0&&u>0){var g=2;g+=u<h?u:h,n._root.css({left:i.left-g})}else n._root.css({left:i.left})}n._source.is(":visible")?(n._icon.show().css("top",i.top-r.top+(n._source.outerHeight()-n._icon.height())/2),"left"===n.settings.iconpos?n._icon.css("left",i.left-r.left-n._icon.outerWidth()-2):n._icon.css("left",i.left-r.left+n._source.outerWidth()+2)):n._icon.hide()}function U(e,n){var r,a=o[e],s=["rgb","hsl","cmyk"];if(void 0!==n)if("panelMode"===e)t.inArray(n,s)&&(a=n);else if("panelModes"===e)t.each(n,(function(e,i){t.inArray(i,s)||delete n[e]})),a=n;else if("panelChannelWidth"===e)(r=parseInt(n)||0)>=10&&r<=40&&(a=r+r%2);else if("panelChannelMargin"===e)(r=parseInt(n)||0)>=0&&r<=50&&(a=r+r%2);else if("panel"===e||"panelAlpha"===e)a=!!n;else if("shadowColor"===e&&"string"==typeof n&&n.length)a=new d(n).getRgbaString();else if("effect"===e)a="slide"===n?"slide":"fade";else if("iconpos"===e)a="left"===n?"left":"right";else if("target"===e){if(a=null,"string"==typeof n||"object"===i(n)){var c=t(n);c&&"object"===i(c[0])&&(a=c)}}else"icon"===e&&"string"==typeof n&&n.length?a=n:"iconalt"===e&&"string"==typeof n&&n.length?a=n:"pickerClass"===e&&"string"==typeof n&&n.length?a=n:e.match(/^autoshow|autosave|resizable|preview|roundcorners$/)?a=!!n:e.match(/^minWidth|maxWidth$/)?a=(r=parseInt(n,10)||0)>100?r:100:e.match(/^speed|width|shadow|ringwidth$/)?a=(r=parseInt(n,10)||0)>0?r:0:new RegExp("^"+l+"$").test(e)||/^save|load|str2color|color2str$/.test(e)?"function"==typeof n&&(a=n):"eventPrefix"===e&&"string"==typeof n&&/^\w*$/.test(n)&&(a=n);return a}function X(t){var e=t._previewWidget.height();t._previewCanvas.height(e),t._previewColor.css("top","-"+e+"px").height(e);var n=t._previewCanvas[0].getContext("2d");t._previewCanvas[0].height=e,t._previewCanvas[0].width=500,t._previewCanvas.css("width","500px");var i=a.createElement("canvas");i.height=10,i.width=10;var r=i.getContext("2d");r.fillStyle="#ccc",r.fillRect(0,0,10,10),r.fillStyle="#888",r.fillRect(0,0,5,5),r.fillRect(5,5,5,5);var o=n.createPattern(i,"repeat");n.fillStyle=o,n.fillRect(0,0,t.Width,e)}function F(t,e){return t.each(e)}var Y=function(n,i){var o=this;o.ready=0,o.settings=i,o.draggingHue=0,o.draggingHueRenderer=c(H),o.draggingSatLum=0,o.draggingSatLumRenderer=c(I),o.resizing=0,o.resizingRenderer=c(E),o.valueRenderer=c(R,100),o.setColorRenderer=c((function(t,e){t.Color.setColor(e),W(t),x(t),t.valueRenderer(t)})),o.settings.ringwidth>o.settings.minWidth/4&&(o.settings.ringwidth=r.floor(o.settings.minWidth/4)),o.hiding=0,o.showing=0,o._source=n,A(o),o.Width=j(o,o.settings.width),o.hueSelectorLineWidth=o.settings.ringwidth,o.hueSelectorCircleRadius=o.Width/2-o.hueSelectorLineWidth/2-10,o.triangleRadius=o.Width/2-15-o.settings.ringwidth;var l='<canvas width="'+o.Width+'" height="'+o.Width+'"></canvas>',g="";o.settings.target&&o.settings.target.length?(o.haveTarget=1,o._target=o.settings.target,g="ui-cs-static"):(o.haveTarget=0,o._target=t("<div/>").prependTo("body").css({width:0,height:0,position:"absolute",overflow:"visible"})),o._picker=t("<div/>").addClass("ui-cs-widget").css({position:"relative"}).width(o.Width).height(o.Width).html(l+l+l+l),o._container=t("<div/>").append(o._picker).width(o.Width).addClass("ui-cs-container"),o._supercontainer=t("<div/>").addClass("ui-cs-supercontainer").append(o._container),o._root=t("<div/>").addClass("ui-cs-chromoselector").addClass(o.settings.pickerClass).addClass(g).append(o._supercontainer),(o.settings.panel||o.settings.panelAlpha)&&(o._panel=t("<div/>").addClass("ui-cs-panel"),o._supercontainer.append(o._panel),o.panelApi=new u(o._panel,o.settings.panelMode,o.settings.panelModes,o.settings.panelAlpha,!o.settings.panel,100,o.settings.panelChannelWidth,o.settings.panelChannelMargin,!0,o.settings.shadow,o.settings.shadowColor),o.panelApi.setColor(o.Color),o._panel.bind(s+"."+s,(function(){o.setColorRenderer(o,o.panelApi.getColor().getHsla())})),o._source.bind(o.settings.eventPrefix+"update."+s,(function(){o.panelApi.setColor(o.Color)})),o._panel.find("select").bind("blur."+s,(function(){o.haveTarget||$(o)})).bind("change."+s,(function(){o._root.width(o.panelApi.getWidth()+o._container.width())}))),o.settings.icon?(o._icon=t("<a/>",{href:"#",tabindex:"999"}).addClass("ui-cs-icon").css("position","absolute").append(t("<img/>",{alt:o.settings.iconalt,src:o.settings.icon}).load((function(){t(this).parent().height(t(this).height()),t(this).parent().width(t(this).width()),B(o)}))),o._target.append(o._icon)):o._icon=t([]),o.settings.resizable&&(o._resizer=t("<canvas />").height(20).width(20).attr("height",20).attr("width",20).addClass("ui-cs-resizer").css({position:"absolute",bottom:"0px",right:"0px"}),k(o,o._resizer[0]),o._supercontainer.append(o._resizer)),o._supercontainer.append(t("<div/>").css("clear","both")),o._previewWidget=t("<div/>").addClass("ui-cs-preview-widget").css("overflow","hidden");var v=new d(o.settings.shadowColor);v.setAlpha(v.getAlpha()-.1);var w="0 0 "+r.max(0,o.settings.shadow-2)+"px 0 "+v.getRgbaString();if(o._preview=t("<div/>").addClass("ui-cs-preview-container").append(o._previewWidget.append(t("<canvas/>").css({display:"block"})).css("box-shadow",w).css("-webkit-box-shadow",w)),o.settings.preview&&o._container.prepend(o._preview),o._previewColor=t("<div/>").addClass("ui-cs-preview-color").css("width","100%").css("background-color",o.Color.getRgbaString()).css("position","relative"),o._previewWidget.append(o._previewColor),o._previewCanvas=o._previewWidget.find("canvas"),X(o),N(o),o._picker.height(o.Width).add(o._container).width(o.Width),o.settings.panel||o.settings.panelAlpha?o._root.width(o.panelApi.getWidth()+o._container.width()):o._root.width(o._container.width()),o._target.append(o._root.hide()),o.canvases=o._picker.find("canvas").css({position:"absolute",width:"100%",height:"100%"}),o.tempCanvas=t(l)[0],o.Effect="fade","slide"===o.settings.effect&&(o.Effect="slide"),o.settings.autoshow){o.settings.lazy?o._source.bind("mouseover."+s,(function(){o.ready||D(o),o._source.unbind("mouseover."+s)})):D(o);var C=o._source;o._icon.length&&(C=o._icon),C.bind("focus."+s+" click."+s,(function(t){t.preventDefault(),o.ready||D(o),T(o)})).bind("blur."+s,(function(){$(o)})),o._source.bind("keydown."+s,(function(t){27===t.keyCode&&$(o)}))}o._source.bind("keyup."+s,(function(){A(o),W(o),x(o),o._source.trigger(o.settings.eventPrefix+"update")})),o.settings.resizable&&o._resizer.bind("mousedown."+s+" touchstart."+s,(function(t){t.preventDefault();var e=h.getEventPosition(o,t,o._picker);o._source.trigger(o.settings.eventPrefix+"resizeStart"),o.resizing=1,o.resizeOffset=[o.Width-e[0],o.Width-e[1]]})),o._container.bind("mousedown."+s+" touchstart."+s,(function(t){t.preventDefault();var e=h.getEventPosition(o,t,o._picker);if(f(e,o.Width/2,o.hueSelectorCircleRadius+o.hueSelectorLineWidth)&&!f(e,o.Width/2,o.hueSelectorCircleRadius-o.hueSelectorLineWidth))o.draggingHue=1,o.draggingHueRenderer(o,t);else{var n=(1-o.Color.getHsl().h)*r.PI*2,i=P(o,n);p(e,i[0],i[1],i[2])&&(o.draggingSatLum=1,o.draggingSatLumRenderer(o,t))}})).bind("mousemove."+s+" touchmove."+s,(function(t){var e=h.getEventPosition(o,t,o._picker);if(f(e,o.Width/2,o.hueSelectorCircleRadius+o.hueSelectorLineWidth/2)&&!f(e,o.Width/2,o.hueSelectorCircleRadius-o.hueSelectorLineWidth/2))o._picker.css("cursor","crosshair");else{var n=(1-o.Color.getHsl().h)*r.PI*2,i=P(o,n);p(e,i[0],i[1],i[2])?o._picker.css("cursor","crosshair"):o._picker.css("cursor","")}})),t([e,a]).bind("mousemove touchmove",(function(t){o.draggingHue?(t.preventDefault(),o.draggingHueRenderer(o,t)):o.draggingSatLum?(t.preventDefault(),o.draggingSatLumRenderer(o,t)):o.resizing&&(t.preventDefault(),o.resizingRenderer(o,t))})).bind("mouseup touchend",(function(t){o.draggingHue?(t.preventDefault(),o.draggingHue=0,H(o,t)):o.draggingSatLum?(t.preventDefault(),o.draggingSatLum=0,I(o,t)):o.resizing&&(t.preventDefault(),o.resizing=0,O(o,o._picker.width()),B(o),o._source.trigger(o.settings.eventPrefix+"resizeStop"))})).bind("resize scroll",(function(t){t.target!==e&&t.target!==a||B(o)})),setTimeout((function(){B(o)}),4)},G={init:function(e){var n={};return e=e||{},t.each(o,(function(t){n[t]=U(t,e[t])})),F(this,(function(){var e=t(this);if(!e.data(s)){e.data(s,new Y(e,n));var i=l.split("|");t.each(i,(function(t){var r=i[t],o=n[r];"function"==typeof o&&e.bind(n.eventPrefix+r+"."+s,o)})),e.trigger(n.eventPrefix+"create")}}))},show:function(e){return F(this,(function(){T(t(this).data(s),e)}))},hide:function(e){return F(this,(function(){$(t(this).data(s),e)}))},toggle:function(e){return F(this,(function(){!function(t,e){t._root.is(":visible")?$(t,e):T(t,e)}(t(this).data(s),e)}))},save:function(){return F(this,(function(){z(t(this).data(s))}))},load:function(){return F(this,(function(){A(t(this).data(s),1)}))},setColor:function(e){return F(this,(function(){var n=t(this).data(s);n.setColorRenderer(n,e)}))},getColor:function(){return this.data(s).Color},getWidth:function(){return t(this).data(s)._root.width()},getHeight:function(){return t(this).data(s)._root.height()},resize:function(e){return F(this,(function(){var n=t(this).data(s);n._source.trigger(n.settings.eventPrefix+"resizeStart"),O(n,e),B(n),n._source.trigger(n.settings.eventPrefix+"resize").trigger(n.settings.eventPrefix+"resizeStop")}))},reflow:function(){return F(this,(function(){B(t(this).data(s))}))},api:function(){var t={},e=this;return t.show=function(t){return G.show.call(e,t),this},t.hide=function(t){return G.hide.call(e,t),this},t.toggle=function(t){return G.toggle.call(e,t),this},t.save=function(){return G.save.call(e),this},t.load=function(){return G.load.call(e),this},t.getColor=function(){return G.getColor.call(e)},t.getWidth=function(){return G.getWidth.call(e)},t.getHeight=function(){return G.getHeight.call(e)},t.setColor=function(t){return G.setColor.call(e,t),this},t.destroy=function(){G.destroy.call(e)},t.resize=function(t){return G.resize.call(e,t),this},t.reflow=function(){return G.reflow.call(e),this},t},destroy:function(){return F(this,(function(){var e=t(this).data(s),n=e.settings.eventPrefix;for(var i in e.haveTarget&&e._container.siblings().length?e._container.remove():e._target.remove(),e._source.add(e._icon).add(e._resizer).add(e._container).unbind("."+s),e)delete e[i];t(this).removeData(s).trigger(n+"destroy").unbind("."+s)}))}};t.fn[s]=function(e){var n=1;try{var r=a.createElement("canvas"),o=r.getContext("2d");o.createImageData(5,5)}catch(t){n=0}return n?G[e]?G[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==i(e)&&e?void t.error("Method "+e+" does not exist on jQuery."+s):G.init.apply(this,arguments):"getColor"===e?new d:"getWidth"===e||"getHeight"===e?0:this},t.fn[s].defaults=function(t,e){return void 0===e?o[t]:(o[t]=U(t,e),this)},t.fn[s].Color=d}(jQuery,window,Math,{autoshow:!0,autosave:!0,pickerClass:"",speed:400,minWidth:120,maxWidth:400,width:180,ringwidth:18,resizable:!0,shadow:6,shadowColor:"rgba(0,0,0,0.6)",preview:!0,panel:!1,panelAlpha:!1,panelChannelWidth:18,panelChannelMargin:12,panelMode:"rgb",panelModes:["rgb","hsl","cmyk"],roundcorners:!0,effect:"fade",icon:null,iconalt:"Open Color Picker",iconpos:"right",lazy:!0,target:null,eventPrefix:"",create:null,ready:null,destroy:null,update:null,beforeShow:null,show:null,beforeHide:null,hide:null,resize:null,resizeStart:null,resizeStop:null,save:null,load:null,str2color:null,color2str:null})}}]);