<template>
    <div class="refer-a-friend m-3">
        <div class="row">
            <div class="px-4 py-2">
                <div class="loading" v-if="loading"></div>
                <div class="row">
                    <div class="col-4 text-center">
                        <svg width="121" height="156" viewBox="0 0 121 156" fill="none"
                             xmlns="http://www.w3.org/2000/svg" style="width: 100%; height: auto;">
                            <path
                                d="M67.4926 39.2087C78.2231 41.0434 85.7802 22.7806 80.9508 15.4225C76.4585 9.07638 69.3236 16.5451 66.0685 13.744C60.842 9.24637 52.6956 9.14972 50.9399 17.6359C49.269 25.7125 58.765 37.7165 67.4926 39.2087Z"
                                fill="#FFEDBB"/>
                            <path
                                d="M28.5841 96.8456C12.1057 97.7056 5.12897 115.004 15.6381 124.12C25.1778 131.875 36.8145 118.018 42.8761 121.022C52.6086 125.847 71.5274 131.799 70.0635 118.876C68.6702 106.576 41.9869 96.1462 28.5841 96.8456Z"
                                fill="#8DF0C2"/>
                            <path
                                d="M95.535 147.682C106.068 143.472 107.483 124.735 95.015 121.519C83.9118 119.031 81.2014 131.746 74.9398 131.758C64.8863 131.777 54.2265 136.266 58.8685 144.197C62.457 150.328 84.0011 152.293 95.535 147.682Z"
                                fill="#DDDDDD"/>
                            <mask id="mask0" mask-type="alpha" maskUnits="userSpaceOnUse" x="0" y="19" width="121"
                                  height="95">
                                <path
                                    d="M55.2731 101.987C33.3594 104.643 9.45699 102.28 0.492271 78.3743C-0.393114 73.6152 10.9538 63.3703 17.3287 47.9644C25.2973 28.7069 35.9221 24.3906 77.7573 20.4063C119.592 16.422 108.453 31.2404 118.082 64.4429C127.711 97.6454 110.183 109.787 99.1922 112.376C81.5949 116.522 77.1868 99.3304 55.2731 101.987Z"
                                    fill="#C4C4C4"/>
                            </mask>
                            <g mask="url(#mask0)">
                                <path
                                    d="M22.2062 84.2745C22.365 81.774 24.268 79.7171 26.7602 79.4598C34.4081 78.6703 39.7734 78.9276 46.6206 80.6448C48.9864 81.2382 50.5245 83.4829 50.3699 85.9171L50.3261 86.6056C50.1173 89.8922 46.9725 92.1517 43.7427 91.5081C37.9984 90.3635 33.4552 90.074 28.1621 90.4503C24.8481 90.6859 21.9667 88.0445 22.1773 84.7288L22.2062 84.2745Z"
                                    fill="#29B473"/>
                                <path
                                    d="M53.46 85.8355C53.46 82.4878 56.5497 80.002 59.8386 80.6265C78.0064 84.0757 90.746 84.0794 109.926 80.5633C113.198 79.9634 116.256 82.4447 116.256 85.7716V86.1678C116.256 88.6935 114.456 90.8678 111.968 91.3028C90.8496 94.9944 77.7131 94.9347 57.7129 91.3232C55.2401 90.8766 53.46 88.7095 53.46 86.1968V85.8355Z"
                                    fill="#EE6636"/>
                                <circle cx="50.2288" cy="108.15" r="28.1673" fill="#EE6636"/>
                                <circle cx="50.8757" cy="65.691" r="22.4155" fill="#EE6636"/>
                                <circle cx="46.7187" cy="58.0694" r="1.81558" fill="white"/>
                                <circle cx="61.2353" cy="56.7876" r="1.81558" fill="white"/>
                                <path
                                    d="M47.4476 72.4172C49.0545 73.458 50.8461 74.114 52.7052 74.3385C54.5644 74.5631 56.4448 74.3504 58.2219 73.716C59.9988 73.0817 61.6294 72.0411 63.0088 70.667C64.3881 69.2931 65.4855 67.6164 66.2329 65.7489"
                                    stroke="white" stroke-width="1.31299" stroke-linecap="round"
                                    stroke-linejoin="round"/>
                                <g opacity="0.8">
                                    <g clip-path="url(#clip0)">
                                        <circle cx="89.4026" cy="107.494" r="28.1673" fill="#089553"/>
                                        <ellipse rx="20.5198" ry="21.0529" transform="matrix(-1 0 0 1 87.8796 65.6909)"
                                                 fill="#089553"/>
                                        <ellipse rx="1.66203" ry="1.70521" transform="matrix(-1 0 0 1 91.6849 58.5325)"
                                                 fill="white"/>
                                        <ellipse rx="1.66203" ry="1.70521" transform="matrix(-1 0 0 1 78.3961 57.3287)"
                                                 fill="white"/>
                                        <path
                                            d="M92.3172 71.412C90.9727 72.5275 89.4261 73.2987 87.7778 73.6687C86.1293 74.0388 84.4232 73.9976 82.7735 73.5502C81.1244 73.1029 79.5736 72.2611 78.2203 71.0874C76.8673 69.914 75.7409 68.4344 74.9103 66.749"
                                            stroke="white" stroke-width="1.31299" stroke-linecap="round"
                                            stroke-linejoin="round"/>
                                    </g>
                                </g>
                            </g>
                            <defs>
                                <clipPath id="clip0">
                                    <rect x="61.2354" y="44.6381" width="56.3346" height="91.0229" fill="white"/>
                                </clipPath>
                            </defs>
                        </svg>

                    </div>
                    <div class="col-8">
                        <div class="refer-title mt-2" style="font-size: 22px;">
                        {{ translate('Refer a friend and get Free Credits') }}</div>
                    </div>
                    <div class="col-12">
                        <div class="refer-description">
                            {{ translate('For every friend you refer and signs in to Gingersauce, you will receive a Free credit.') }}
                            {{ translate('There is no limit to how many credits you can earn, so donâ€™t just sit there... start typing :)') }}
                            
                            
                        </div>
                        <div class="refer-form">
                            <div class="row">
                                <div class="col-12 mb-3">
                                    <input type="email" 
										class="form-control greyed" 
										:placeholder="translate('Friend\'s Email')"
										v-model="email">
                                </div>
                                <div class="col-12">
                                    <button class="btn btn-success d-block w-100" @click.prevent.stop=subscribe>
                                    {{ translate('Send') }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
import translate from "../utils/translate";
export default {
    data() {
        return {
            email: '',
            loading: false,
        }
    },
    methods: {
        translate,
        subscribe() {
            this.loading = true
            axios.post(endpoints.ajax.post.referafriend, {email: this.email})
                .then(response => {
                    this.email = ''
                    this.loading = false
                    if (response.data == ':)') {
                        new Noty({
                            type: 'info',
                            text: this.translate('Your invite has been sent'),
                            timeout: 5000,
                        }).show();
                    } else if (response.data == 'exists') {
                        new Noty({
                            type: 'error',
                            text: this.translate('This user already exists in system'),
                            timeout: 5000,
                        }).show();
                    } else {
                        new Noty({
                            type: 'error',
                            text: this.translate('Error has happened. Please try again later'),
                            timeout: 5000,
                        }).show();
                    }


                })
        }
    }
}
</script>
<style lang="scss">
@keyframes loader-rotate {
    0% {
        transform: rotate(0);
    }
    100% {
        transform: rotate(360deg);
    }
}

.loading {
    width: 56px;
    height: 56px;
    border: 8px solid rgba(0, 82, 236, 0.25);
    border-top-color: #0052ec;
    border-radius: 50%;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -28px;
    margin-top: -28px;
    z-index: 100;
    animation: loader-rotate 1s linear infinite;
    top: 50%;
    margin: -28px auto 0 auto;
    text-shadow: 0 0 black;
}

.shadow-orange {
    box-shadow: 0px 4px 30px rgba(238, 102, 54, 0.4) !important;
    border-radius: 10px;
}

.refer-title {
    font-size: 25px;
    line-height: 28px;
    font-weight: 300;
    font-style: italic;
    margin-bottom: 10px;
}

.refer-description {
    font-size: 12px;
    font-weight: 600;
    line-height: 15px;
    margin-bottom: 10px;
}

.form-control.greyed {
    background: #DADADA;
    border-right: 10px;
    color: #777777;
}
</style>
